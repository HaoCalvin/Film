<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šæºå½±è§† Â· æ™ºèƒ½ç›´è¾¾</title>
    <!-- ä½¿ç”¨ Font Awesome å›¾æ ‡åº“ (v6 å…è´¹ç‰ˆ) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(145deg, #f5f7fa 0%, #eef1f5 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1400px;
            width: 100%;
        }

        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 600;
            background: linear-gradient(135deg, #1e2b3a, #2c3e50);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
        }

        .header h1 i {
            background: #2c3e50;
            color: white;
            padding: 12px;
            border-radius: 50%;
            font-size: 1.8rem;
            background: linear-gradient(145deg, #3498db, #2980b9);
            -webkit-text-fill-color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .sub {
            color: #4a5c6e;
            font-size: 1.1rem;
            margin-top: 8px;
            font-weight: 300;
        }

        /* æœç´¢æ¡†æ¨¡å— */
        .search-section {
            background: white;
            border-radius: 60px;
            box-shadow: 0 20px 35px -8px rgba(0,20,40,0.25);
            padding: 8px 8px 8px 25px;
            display: flex;
            align-items: center;
            max-width: 850px;
            margin: 0 auto 2rem auto;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
            transition: all 0.2s;
        }

        .search-section:focus-within {
            box-shadow: 0 20px 40px -5px #2980b9;
            transform: scale(1.01);
        }

        .search-section i {
            color: #7f8c8d;
            font-size: 1.3rem;
            margin-right: 10px;
        }

        #searchInput {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1.2rem;
            padding: 16px 0;
            background: transparent;
            color: #1e2b3a;
        }

        #searchInput::placeholder {
            color: #a0b3c6;
            font-weight: 300;
            font-style: italic;
        }

        #searchBtn {
            background: #2c3e50;
            border: none;
            color: white;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 14px 38px;
            border-radius: 40px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.3px;
            box-shadow: 0 5px 12px rgba(44,62,80,0.3);
        }

        #searchBtn:hover {
            background: #1e2b3a;
            transform: translateY(-2px);
        }

        /* ä¸¤åˆ—å¸ƒå±€: å·¦ä¾§çƒ­æœæ¦œ / å³ä¾§æœç´¢ç»“æœ */
        .main-panel {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* å·¦ä¾§çƒ­æœå¡ç‰‡ */
        .trending-box {
            flex: 1.1;
            min-width: 280px;
            background: rgba(255,255,255,0.75);
            backdrop-filter: blur(12px);
            border-radius: 40px;
            padding: 1.8rem 1.5rem;
            box-shadow: 0 20px 35px -10px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.6);
            height: fit-content;
        }

        .trending-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            border-bottom: 2px dashed #cbd5e1;
            padding-bottom: 15px;
        }

        .trending-header i {
            font-size: 2rem;
            color: #e67e22;
            background: #ffe6d5;
            padding: 12px;
            border-radius: 20px;
        }

        .trending-header h2 {
            font-size: 1.9rem;
            font-weight: 600;
            color: #1e293b;
        }

        .trending-list {
            list-style: none;
        }

        .trending-item {
            display: flex;
            align-items: center;
            padding: 14px 12px;
            border-radius: 60px;
            background: white;
            margin-bottom: 12px;
            box-shadow: 0 5px 8px rgba(0,0,0,0.02);
            transition: 0.1s;
            border: 1px solid #e9edf2;
            cursor: default;
        }

        .trending-item:hover {
            background: #fef9f2;
            border-color: #f1c40f;
            transform: translateX(5px);
        }

        .rank {
            font-weight: 800;
            font-size: 1.5rem;
            width: 45px;
            text-align: center;
            color: #b0c4d9;
        }

        .rank-1 { color: #f1c40f; }
        .rank-2 { color: #aab8c5; }
        .rank-3 { color: #cd7f32; }

        .trending-info {
            flex: 1;
            margin-left: 8px;
        }

        .trending-title {
            font-weight: 600;
            font-size: 1.2rem;
            color: #0f172a;
        }

        .trending-source {
            font-size: 0.85rem;
            color: #5e6f88;
            margin-top: 4px;
            display: flex;
            gap: 15px;
        }

        .trending-source span i {
            font-size: 0.7rem;
            margin-right: 4px;
            color: #e67e22;
        }

        .hot-badge {
            background: #f1c40f;
            color: #1e293b;
            padding: 5px 12px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        /* å³ä¾§æœç´¢ç»“æœåŒºåŸŸ */
        .results-box {
            flex: 2.4;
            min-width: 400px;
            background: transparent;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 20px;
            padding: 0 6px;
        }

        .results-header h3 {
            font-size: 1.8rem;
            font-weight: 500;
            color: #1e2b3a;
        }

        .results-header span {
            background: white;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            color: #2c3e50;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

        .movie-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* å½±è§†å¡ç‰‡ */
        .movie-card {
            display: flex;
            background: white;
            border-radius: 32px;
            overflow: hidden;
            box-shadow: 0 12px 28px -10px rgba(0,0,0,0.15);
            transition: all 0.25s;
            border: 1px solid rgba(255,255,255,0.7);
            backdrop-filter: blur(4px);
            align-items: stretch;
        }

        .movie-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 25px 35px -12px #1e2b3a;
        }

        .poster {
            width: 130px;
            background: #cfdee9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #6b8ba0;
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
            background-color: #bdc9d4;
            background-blend-mode: overlay;
        }

        .movie-info {
            padding: 20px 22px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .movie-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #0c1a28;
            letter-spacing: -0.3px;
            line-height: 1.2;
            margin-bottom: 8px;
        }

        .movie-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            margin-bottom: 12px;
            color: #375a7a;
        }

        .movie-meta div {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.98rem;
            background: #ecf4fb;
            padding: 5px 15px;
            border-radius: 40px;
        }

        .movie-meta i {
            color: #e67e22;
            width: 18px;
        }

        .director {
            background: #e8edf2;
        }

        .cast {
            background: #e2eaf1;
        }

        .description {
            color: #2c3e50;
            margin: 10px 0 14px 0;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .watch-buttons {
            display: flex;
            gap: 12px;
            margin-top: 6px;
            flex-wrap: wrap;
        }

        .watch-btn {
            background: #f0f4f9;
            border: none;
            padding: 12px 22px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1rem;
            color: #1e2b3a;
            cursor: pointer;
            transition: 0.15s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.02);
            text-decoration: none;
            border: 1px solid transparent;
        }

        .watch-btn i {
            color: #3498db;
        }

        .watch-btn:hover {
            background: #2c3e50;
            color: white;
            border-color: #2c3e50;
        }
        .watch-btn:hover i {
            color: white;
        }

        .free-tag {
            background: #2ecc71;
            color: white;
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 50px;
            margin-left: 8px;
        }

        .vip-tag {
            background: #e67e22;
            color: white;
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 50px;
            margin-left: 8px;
        }

        .footer-note {
            text-align: center;
            margin-top: 40px;
            color: #687a8f;
            font-size: 0.9rem;
        }

        .footer-note i {
            color: #c44536;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- å¤´éƒ¨ -->
    <div class="header">
        <h1>
            <i class="fas fa-film"></i> å¤šæº Â· å½±è§†é›·è¾¾
        </h1>
        <div class="sub">è¾“å…¥ç‰‡å â€” æ™ºèƒ½è·³è½¬å…VIPå®˜æ–¹æº Â· å…¨å¹³å°èšåˆ</div>
    </div>

    <!-- æœç´¢æ¡† -->
    <div class="search-section">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="æœç´¢ç”µå½±ã€å‰§é›†ã€ç»¼è‰º..." value="æµæµªåœ°çƒ">
        <button id="searchBtn"><i class="fas fa-arrow-right"></i> å¯»æº</button>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒº å·¦çƒ­æœ / å³ç»“æœ -->
    <div class="main-panel">
        <!-- å·¦ä¾§çƒ­æœæ¦œ (åŠ¨æ€ç”Ÿæˆ) -->
        <div class="trending-box" id="trendingBox">
            <div class="trending-header">
                <i class="fas fa-fire"></i>
                <h2>ç»¼åˆçƒ­æœ Â· å½±åŠ¿æ¦œ</h2>
            </div>
            <ul class="trending-list" id="trendingList">
                <!-- é€šè¿‡JSå¡«å…¥æ¨¡æ‹Ÿç®—æ³•çƒ­æœ -->
            </ul>
            <div style="margin-top: 20px; font-size:0.8rem; color:#aab8c5; text-align:center;">
                <i class="fas fa-chart-line"></i> å¤šç«™çˆ¬å– Â· å®æ—¶ç®—æ³•åŠ æƒ
            </div>
        </div>

        <!-- å³ä¾§æœç´¢ç»“æœå®¹å™¨ -->
        <div class="results-box" id="resultsBox">
            <div class="results-header">
                <h3><i class="fas fa-clapperboard" style="margin-right: 10px;"></i>åŒ¹é…ç»“æœ</h3>
                <span><i class="far fa-clock"></i> æ™ºèƒ½å…VIPå¯¼å‘</span>
            </div>
            <div class="movie-grid" id="movieGrid">
                <!-- åŠ¨æ€å¡ç‰‡ä¼šå‡ºç°åœ¨è¿™é‡Œ (åˆæ¬¡å±•ç¤ºé»˜è®¤å¡«å……) -->
            </div>
        </div>
    </div>

    <div class="footer-note">
        <i class="fas fa-robot"></i> æœ¬ç«™ä»…æä¾›è·³è½¬æŒ‡å¼•ï¼Œæ‰€æœ‰å†…å®¹ç‰ˆæƒå½’å®˜æ–¹å¹³å° Â· é‡åˆ°VIPè‡ªåŠ¨æ›¿æ¢ä¸ºå…è´¹æº
    </div>
</div>

<script>
    (function() {
        // ---------- æ¨¡æ‹Ÿçš„å½±è§†æ•°æ®åº“ (å®é™…å¯ä»¥ç”¨API, è¿™é‡Œå†…ç½®ä¸°å¯Œç¤ºä¾‹ç”¨äºå±•ç¤º) ----------
        const MOVIE_DB = [
            {
                id: 1,
                title: "æµæµªåœ°çƒ2",
                year: "2023",
                director: "éƒ­å¸†",
                actors: "å´äº¬, åˆ˜å¾·å, æé›ªå¥",
                poster: "ğŸŒ",
                posterColor: "#1a374d",
                platforms: [
                    { name: "è…¾è®¯è§†é¢‘", url: "https://v.qq.com/movie/liulangdiqiu2", vip: true },
                    { name: "Bilibili", url: "https://www.bilibili.com/bangumi/play/liulangdiqiu2", vip: false },
                    { name: "ä¼˜é…·", url: "https://www.youku.com/liulangdiqiu2", vip: true }
                ]
            },
            {
                id: 2,
                title: "ç‹‚é£™",
                year: "2023",
                director: "å¾çºªå‘¨",
                actors: "å¼ è¯‘, å¼ é¢‚æ–‡, æä¸€æ¡",
                poster: "ğŸ“º",
                posterColor: "#693838",
                platforms: [
                    { name: "çˆ±å¥‡è‰º", url: "https://www.iqiyi.com/kuangbiao", vip: true },
                    { name: "å¤®è§†é¢‘", url: "https://tv.cctv.com/kuangbiao", vip: false },
                    { name: "å’ªå’•è§†é¢‘", url: "https://www.miguvideo.com/kuangbiao", vip: false }
                ]
            },
            {
                id: 3,
                title: "å¥¥æœ¬æµ·é»˜",
                year: "2023",
                director: "è¯ºå…°",
                actors: "åŸºé‡Œå®‰Â·å¢¨è², è‰¾ç±³è‰Â·å¸ƒæœ—ç‰¹",
                poster: "ğŸ’¥",
                posterColor: "#4d3e2b",
                platforms: [
                    { name: "Netflix", url: "https://www.netflix.com/oppenheimer", vip: true },
                    { name: "Peacock", url: "https://www.peacocktv.com/oppenheimer", vip: true },
                    { name: "Apple TV", url: "https://tv.apple.com/oppenheimer", vip: true }
                ]
            },
            {
                id: 4,
                title: "ç¹èŠ±",
                year: "2023",
                director: "ç‹å®¶å«",
                actors: "èƒ¡æ­Œ, é©¬ä¼Šç, å”å«£",
                poster: "ğŸŒ¸",
                posterColor: "#b35e6b",
                platforms: [
                    { name: "è…¾è®¯è§†é¢‘", url: "https://v.qq.com/fanhua", vip: true },
                    { name: "CCTV", url: "https://tv.cctv.com/fanhua", vip: false }
                ]
            },
            {
                id: 5,
                title: "å‘¨å¤„é™¤ä¸‰å®³",
                year: "2023",
                director: "é»„ç²¾ç”«",
                actors: "é˜®ç»å¤©, è¢å¯Œå",
                poster: "ğŸ¯",
                posterColor: "#38675d",
                platforms: [
                    { name: "Netflix", url: "https://www.netflix.com/thepiger", vip: true },
                    { name: "Youtube", url: "https://www.youtube.com/movies?piger", vip: false }
                ]
            }
        ];

        // ----- çƒ­æœæ±  (æ¨¡æ‹Ÿå¤šä¸ªç«™ç‚¹çƒ­æœåŸå§‹æ•°æ®) -----
        const HOT_SITES = {
            douban: ['ç‹‚é£™', 'ç¹èŠ±', 'å‘¨å¤„é™¤ä¸‰å®³', 'å¥¥æœ¬æµ·é»˜', 'æ¼«é•¿çš„å­£èŠ‚', 'ä¸‰ä½“', 'æµæµªåœ°çƒ2', 'çŒç¯®é«˜æ‰‹', 'èœ˜è››ä¾ ', 'æ¶ˆå¤±çš„å¥¹'],
            weibo: ['æµæµªåœ°çƒ2', 'ç‹‚é£™', 'å¥¥æœ¬æµ·é»˜', 'å‘¨å¤„é™¤ä¸‰å®³', 'å°ç¥', 'å…«è§’ç¬¼ä¸­', 'è¶…èƒ½ä¸€å®¶äºº', 'çƒ­çƒˆ', 'å­¤æ³¨ä¸€æ·'],
            iqiyi: ['ç‹‚é£™', 'è²èŠ±æ¥¼', 'é•¿é£æ¸¡', 'å®å®‰å¦‚æ¢¦', 'æµæµªåœ°çƒ2', 'ç’å¤©è¿‡æµ·'],
            bilibili: ['ä¸­å›½å¥‡è°­', 'æµæµªåœ°çƒ2', 'å¥¥æœ¬æµ·é»˜', 'ä¸‰ä½“', 'å‡¡äººä¿®ä»™ä¼ ', 'ç‹‚é£™']
        };

        // çƒ­æœç®—æ³•: ç»Ÿè®¡è¯é¢‘ + åŠ æƒå¾—åˆ† (ç®€å•æ¨¡æ‹Ÿ)
        function generateTrending() {
            const scoreMap = new Map();  // è¯ -> å¾—åˆ†

            // æƒé‡é…ç½®
            const weights = { douban: 1.3, weibo: 2.0, iqiyi: 1.1, bilibili: 0.9 };

            for (let [site, items] of Object.entries(HOT_SITES)) {
                let weight = weights[site] || 1.0;
                items.forEach((title, index) => {
                    // æ’åè¶Šé å‰åŠ åˆ†è¶Šå¤š, ç¬¬ä¸€ååŠ 5*weight, ç¬¬äºŒå4*weight, ä»¥æ­¤ç±»æ¨
                    let rankBonus = Math.max(0, (10 - index) * weight);
                    let current = scoreMap.get(title) || 0;
                    scoreMap.set(title, current + rankBonus);
                });
            }

            // è½¬ä¸ºæ•°ç»„å¹¶æ’åº
            let sorted = Array.from(scoreMap.entries()).sort((a, b) => b[1] - a[1]);
            // å–å‰12åï¼Œå¹¶é™„åŠ éšæœºä¸€äº›æ¥æºä¿¡æ¯å±•ç¤º
            let top = sorted.slice(0, 12).map((item, idx) => {
                let title = item[0];
                // æŸ¥æ‰¾è¯¥titleå¯èƒ½çš„æ¥æºç«™ç‚¹ (ä»…å±•ç¤ºç”¨)
                let sources = [];
                for (let [site, list] of Object.entries(HOT_SITES)) {
                    if (list.includes(title)) sources.push(site);
                }
                // æ¥æºå›¾æ ‡æ˜ å°„
                let sourceIcons = sources.slice(0, 3).map(s => {
                    if (s === 'douban') return '<i class="fab fa-douban"></i>';
                    if (s === 'weibo') return '<i class="fab fa-weibo"></i>';
                    if (s === 'iqiyi') return '<i class="fas fa-play-circle"></i>';
                    if (s === 'bilibili') return '<i class="fab fa-bilibili"></i>';
                    return '<i class="fas fa-video"></i>';
                }).join(' ');
                return { rank: idx+1, title, sourceIcons, score: item[1].toFixed(1) };
            });
            return top;
        }

        // æ¸²æŸ“çƒ­æœæ¦œ
        function renderTrending() {
            const trendingData = generateTrending();
            const ul = document.getElementById('trendingList');
            ul.innerHTML = '';
            trendingData.forEach(t => {
                const li = document.createElement('li');
                li.className = 'trending-item';

                const rankSpan = document.createElement('span');
                rankSpan.className = `rank ${t.rank === 1 ? 'rank-1' : (t.rank === 2 ? 'rank-2' : (t.rank === 3 ? 'rank-3' : ''))}`;
                rankSpan.textContent = t.rank;

                const infoDiv = document.createElement('div');
                infoDiv.className = 'trending-info';
                infoDiv.innerHTML = `<div class="trending-title">${t.title}</div>
                                     <div class="trending-source">${t.sourceIcons} <span>çƒ­åº¦ ${t.score}</span></div>`;

                li.appendChild(rankSpan);
                li.appendChild(infoDiv);
                ul.appendChild(li);
            });
        }

        // æ¸²æŸ“å½±è§†å¡ç‰‡ (æ ¹æ®æœç´¢è¯è¿‡æ»¤)
        function renderMovies(filter = '') {
            const grid = document.getElementById('movieGrid');
            let filtered = MOVIE_DB;

            if (filter.trim() !== '') {
                const keyword = filter.toLowerCase();
                filtered = MOVIE_DB.filter(m => m.title.toLowerCase().includes(keyword) ||
                                               m.director.toLowerCase().includes(keyword) ||
                                               m.actors.toLowerCase().includes(keyword));
            }

            if (filtered.length === 0) {
                grid.innerHTML = `<div style="background:white; border-radius: 40px; padding: 50px; text-align:center; color:#7f8c8d;">
                                    <i class="fas fa-film-slash" style="font-size:3rem; margin-bottom:1rem;"></i><br/>æ²¡æœ‰æ‰¾åˆ°ã€Œ${filter}ã€ç›¸å…³å½±è§†ï¼Œè¯•è¯•å…¶ä»–å…³é”®è¯
                                  </div>`;
                return;
            }

            let htmlStr = '';
            filtered.forEach(movie => {
                // åˆ¤æ–­æ˜¯å¦å­˜åœ¨å…è´¹æº (vip===false)
                const freePlatform = movie.platforms.find(p => p.vip === false);
                // é¦–ä¸ªå…è´¹æºæˆ–è€…ä»»æ„å¹³å°ï¼ˆå¦‚æœæ˜¯å…¨vipåˆ™å–ç¬¬ä¸€ä¸ªä½†æ ‡è®°vip, ä½†ç‚¹å‡»é€»è¾‘ä¼šè‡ªåŠ¨é€‰æ‹©å…VIPï¼‰
                // ä½†æ˜¯æ˜¾ç¤ºä¸Šï¼Œæˆ‘ä»¬æä¾›â€œç«‹å³è§‚çœ‹â€æŒ‰é’®ï¼Œä½†éœ€è¦è·³è½¬è§„åˆ™: ç‚¹å‡»è·³è½¬åˆ°ç¬¬ä¸€ä¸ªå…VIPç½‘ç«™ï¼›å¦‚æœæ²¡æœ‰å…è´¹åˆ™è·³è½¬åˆ°ç¬¬ä¸€ä¸ªä½†æç¤ºVIPã€‚
                // åˆ¶ä½œä¸¤ä¸ªæŒ‰é’®ï¼šä¸€ä¸ªä¸»è¦â€œå…VIPè§‚çœ‹â€ï¼ˆå¦‚æœå­˜åœ¨å…è´¹æºï¼‰ï¼›ç¬¬äºŒä¸ªæ˜¯â€œå…¶ä»–å¹³å°â€
                const hasFree = freePlatform !== undefined;

                // æ„å»ºå¹³å°æ ‡è®°
                let vipChip = hasFree ? '<span class="free-tag"><i class="fas fa-check-circle"></i> æœ‰å…è´¹æº</span>' : '<span class="vip-tag"><i class="fas fa-crown"></i> å¯èƒ½éœ€VIP</span>';

                // ä¸ºæ¯ä¸ªæŒ‰é’®ç»‘å®šè·³è½¬ï¼Œä½¿ç”¨ onclick å­—ç¬¦ä¸²å½¢å¼ï¼ˆç®€å•å¤„ç†ï¼‰
                // ä¸»è§‚çœ‹æŒ‰é’®ï¼šç‚¹å‡»æ‰§è¡Œæ™ºèƒ½è·³è½¬â€”â€”è‡ªåŠ¨æ‰¾å…è´¹æºï¼Œè‹¥æ²¡æœ‰å…è´¹æºåˆ™ç”¨ç¬¬ä¸€ä¸ª
                const primaryUrl = hasFree ? freePlatform.url : movie.platforms[0].url;
                const primaryName = hasFree ? 'ğŸ¿ å…VIPè§‚çœ‹' : 'â–¶ï¸ å‰å¾€è§‚çœ‹ (å¯èƒ½VIP)';

                // è¾…åŠ©æŒ‰é’®ï¼šå…¶ä»–å¹³å°å¿«é€Ÿé€‰æ‹©
                const otherPlatforms = movie.platforms.filter(p => (hasFree ? p.url !== freePlatform.url : true)).slice(0,2);

                htmlStr += `
                <div class="movie-card">
                    <div class="poster" style="background-color: ${movie.posterColor}; font-size: 3.5rem; display:flex; align-items:center; justify-content:center;">
                        ${movie.poster}
                    </div>
                    <div class="movie-info">
                        <div class="movie-title">${movie.title} <span style="font-size:1rem; font-weight:300; margin-left:10px;">${movie.year}</span> ${vipChip}</div>
                        <div class="movie-meta">
                            <div class="director"><i class="fas fa-video"></i> å¯¼æ¼”: ${movie.director}</div>
                            <div class="cast"><i class="fas fa-user"></i> æ¼”å‘˜: ${movie.actors}</div>
                        </div>
                        <div class="watch-buttons">
                            <a class="watch-btn" href="${primaryUrl}" target="_blank" rel="noopener noreferrer"><i class="fas fa-external-link-alt"></i> ${primaryName}</a>
                            ${otherPlatforms.map(p => `<a class="watch-btn" href="${p.url}" target="_blank" rel="noopener noreferrer"><i class="fas fa-tv"></i> ${p.name} ${p.vip ? 'ğŸ”’' : 'ğŸ†“'}</a>`).join('')}
                        </div>
                    </div>
                </div>`;
            });
            grid.innerHTML = htmlStr;
        }

        // åˆå§‹åŒ–é¡µé¢
        function init() {
            renderTrending();
            // é»˜è®¤æœç´¢ â€œæµæµªåœ°çƒâ€ å±•ç¤ºä¾‹å­
            document.getElementById('searchInput').value = 'æµæµªåœ°çƒ';
            renderMovies('æµæµªåœ°çƒ');

            // ç»‘å®šæœç´¢äº‹ä»¶
            const searchBtn = document.getElementById('searchBtn');
            const searchInput = document.getElementById('searchInput');

            function performSearch() {
                const keyword = searchInput.value.trim();
                renderMovies(keyword || '');  // å¦‚æœç©ºä¸²æ˜¾ç¤ºå…¨éƒ¨
            }

            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }

        init();
    })();
</script>
</body>
</html>
