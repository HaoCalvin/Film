<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…‰å½±ç›´è¾¾ Â· å®˜æ–¹å½±è§†å¯¼èˆª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: #0f0f14;
            color: #e8eef2;
            min-height: 100vh;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 2rem 2rem;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 300;
            letter-spacing: 4px;
            background: linear-gradient(135deg, #fff3d6, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: #7a85a8;
            font-size: 1rem;
        }

        /* æœç´¢åŒº */
        .search-panel {
            max-width: 800px;
            margin: 0 auto 3rem;
        }

        .search-box {
            display: flex;
            gap: 0.5rem;
            background: #1e212e;
            border-radius: 3rem;
            padding: 0.3rem;
            border: 1px solid #333a4a;
            transition: all 0.3s;
        }

        .search-box:focus-within {
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: white;
            font-size: 1.1rem;
            padding: 1rem 1.5rem;
        }

        .search-input::placeholder {
            color: #4e5670;
        }

        .search-btn {
            background: #d4af37;
            border: none;
            border-radius: 3rem;
            padding: 0 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #0f0f14;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-btn:hover {
            background: #e5c158;
            transform: translateY(-2px);
        }

        /* åˆ†ç±»æ ‡ç­¾ */
        .category-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .category-tab {
            background: #1a1d29;
            border: 1px solid #2f3547;
            border-radius: 2rem;
            padding: 0.6rem 1.5rem;
            font-size: 0.9rem;
            color: #9ba6c4;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-tab:hover {
            border-color: #d4af37;
            color: #d4af37;
        }

        .category-tab.active {
            background: #d4af37;
            border-color: #d4af37;
            color: #0f0f14;
            font-weight: 500;
        }

        /* çƒ­æœæ¦œ - æ–°æ ·å¼ */
        .trending-section {
            background: #171a26;
            border-radius: 2rem;
            padding: 1.5rem;
            margin-bottom: 3rem;
            border: 1px solid #2d3345;
        }

        .trending-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .trending-header h2 {
            font-size: 1.5rem;
            font-weight: 400;
            color: #e5d5b3;
        }

        .trending-header span {
            color: #7b86a6;
            font-size: 0.9rem;
        }

        .trending-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.8rem;
        }

        .trending-item {
            background: #222736;
            border-radius: 1rem;
            padding: 0.8rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid #31384b;
        }

        .trending-item:hover {
            border-color: #d4af37;
            transform: translateX(5px);
            background: #2a3042;
        }

        .trending-rank {
            font-size: 1.3rem;
            font-weight: 700;
            color: #4a526e;
            min-width: 35px;
        }

        .trending-name {
            flex: 1;
            font-size: 1rem;
        }

        .trending-hot {
            color: #d4af37;
            font-size: 0.8rem;
        }

        /* å¹³å°å¡ç‰‡åŒº */
        .platforms-title {
            margin: 2rem 0 1rem;
            font-size: 1.4rem;
            font-weight: 300;
            color: #cfd8e6;
        }

        .platforms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.2rem;
            margin-bottom: 3rem;
        }

        .platform-card {
            background: #171b28;
            border-radius: 1.5rem;
            padding: 1.5rem;
            border: 1px solid #2a3145;
            transition: all 0.25s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .platform-card:hover {
            border-color: #d4af37;
            transform: translateY(-4px);
            box-shadow: 0 15px 25px -10px rgba(0,0,0,0.7);
        }

        .platform-card.free::before {
            content: 'å…';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #2e7d32;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .platform-card.vip::before {
            content: 'VIP';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #b8860b;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .platform-name {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #e8e2d0;
        }

        .platform-desc {
            color: #848db0;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }

        .platform-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .platform-tag {
            background: #262d40;
            border-radius: 2rem;
            padding: 0.2rem 0.8rem;
            font-size: 0.7rem;
            color: #b7c0da;
        }

        /* æœç´¢ç»“æœåŒº */
        .result-section {
            margin-top: 2rem;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .result-title {
            font-size: 1.4rem;
            font-weight: 300;
        }

        .result-count {
            color: #8d99c2;
        }

        .result-cards {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .result-card {
            background: #171b28;
            border-radius: 1.5rem;
            padding: 1.5rem;
            border: 1px solid #2a3145;
            display: flex;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .result-number {
            font-size: 2rem;
            font-weight: 700;
            color: #323b54;
            min-width: 50px;
            text-align: center;
        }

        .result-info {
            flex: 1;
        }

        .result-info h3 {
            font-size: 1.3rem;
            margin-bottom: 0.3rem;
            color: #f0e7d6;
        }

        .result-info p {
            color: #8d99c2;
            font-size: 0.9rem;
        }

        .result-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .result-btn {
            padding: 0.5rem 1.2rem;
            border-radius: 2rem;
            text-decoration: none;
            font-size: 0.9rem;
            transition: 0.2s;
            background: #262d40;
            color: #cbd2e6;
            border: 1px solid #3d455e;
        }

        .result-btn.free {
            background: #d4af37;
            color: #0f0f14;
            border: none;
            font-weight: 500;
        }

        .result-btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.2);
        }

        .footer {
            text-align: center;
            margin-top: 4rem;
            padding: 2rem 0;
            color: #4d577a;
            border-top: 1px solid #222837;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¬ å…‰å½±ç›´è¾¾</h1>
            <p>è¾“å…¥å½±è§†åç§° Â· ä¸€é”®è·³è½¬å®˜æ–¹æ­£ç‰ˆ</p>
        </div>

        <!-- æœç´¢åŒº -->
        <div class="search-panel">
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="ä¾‹å¦‚ï¼šå¥¥æœ¬æµ·é»˜ã€ç¹èŠ±ã€æ²™ä¸˜2" value="å¥¥æœ¬æµ·é»˜">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i> ç«‹å³è·³è½¬
                </button>
            </div>

            <!-- åˆ†ç±»æ ‡ç­¾ -->
            <div class="category-tabs">
                <span class="category-tab active" data-category="all">å…¨éƒ¨</span>
                <span class="category-tab" data-category="free">å…è´¹ä¼˜å…ˆ</span>
                <span class="category-tab" data-category="china">å›½å†…å¹³å°</span>
                <span class="category-tab" data-category="global">å›½é™…å¹³å°</span>
                <span class="category-tab" data-category="info">ä¿¡æ¯ç½‘ç«™</span>
            </div>
        </div>

        <!-- çƒ­æœæ¦œ (çœŸå®æ•°æ®) -->
        <div class="trending-section">
            <div class="trending-header">
                <h2><i class="fas fa-fire" style="color: #d4af37; margin-right: 0.5rem;"></i>ä»Šæ—¥çƒ­æœ Â· å½±è§†æ¦œ</h2>
                <span>æ›´æ–°äº 2024-03-21</span>
            </div>
            <div class="trending-list" id="trendingList">
                <!-- åŠ¨æ€åŠ è½½ -->
            </div>
        </div>

        <!-- å¹³å°ç›´è¾¾åŒº -->
        <h2 class="platforms-title">ğŸ“º å¸¸ç”¨å½±è§†å¹³å°</h2>
        <div class="platforms-grid" id="platformsGrid"></div>

        <!-- æœç´¢ç»“æœå±•ç¤ºåŒº -->
        <div class="result-section" id="resultSection" style="display: none;">
            <div class="result-header">
                <h2 class="result-title" id="resultTitle">æœç´¢ç»“æœ</h2>
                <span class="result-count" id="resultCount"></span>
            </div>
            <div class="result-cards" id="resultCards"></div>
        </div>

        <!-- åº•éƒ¨ -->
        <div class="footer">
            <p>ç‚¹å‡»ä»»ä½•å¡ç‰‡å³å¯è·³è½¬è‡³è¯¥å¹³å°çš„å®˜æ–¹æœç´¢é¡µé¢ Â· å…è´¹å¹³å°ä¼˜å…ˆå±•ç¤º Â· æ— éœ€æ³¨å†Œç™»å½•</p>
        </div>
    </div>

    <script>
        (function() {
            // ==================== ç²¾å‡†å½±è§†æ•°æ® ====================
            const MOVIE_DATABASE = {
                // çƒ­é—¨ç”µå½±
                'å¥¥æœ¬æµ·é»˜': {
                    title: 'å¥¥æœ¬æµ·é»˜',
                    year: 2023,
                    director: 'å…‹é‡Œæ–¯æ‰˜å¼—Â·è¯ºå…°',
                    actors: 'åŸºé‡Œå®‰Â·å¢¨è²ã€è‰¾ç±³è‰Â·å¸ƒæœ—ç‰¹ã€é©¬ç‰¹Â·è¾¾è’™',
                    type: 'ç”µå½±',
                    aliases: ['Oppenheimer', 'å¥¥æœ¬æµ·é»˜']
                },
                'æ²™ä¸˜2': {
                    title: 'æ²™ä¸˜2',
                    year: 2024,
                    director: 'ä¸¹å°¼æ–¯Â·ç»´ä¼¦çº½ç“¦',
                    actors: 'æè«è¥¿Â·æŸ¥æ‹‰æ¢…ã€èµè¾¾äºšã€å¥¥æ–¯æ±€Â·å·´ç‰¹å‹’',
                    type: 'ç”µå½±',
                    aliases: ['Dune: Part Two', 'æ²™ä¸˜ï¼šæ•‘ä¸–ä¸»']
                },
                'å‘¨å¤„é™¤ä¸‰å®³': {
                    title: 'å‘¨å¤„é™¤ä¸‰å®³',
                    year: 2023,
                    director: 'é»„ç²¾ç”«',
                    actors: 'é˜®ç»å¤©ã€è¢å¯Œåã€é™ˆä»¥æ–‡',
                    type: 'ç”µå½±',
                    aliases: ['The Pig, the Snake and the Pigeon']
                },
                'åŠŸå¤«ç†ŠçŒ«4': {
                    title: 'åŠŸå¤«ç†ŠçŒ«4',
                    year: 2024,
                    director: 'è¿ˆå…‹Â·ç±³åˆ‡å°”',
                    actors: 'æ°å…‹Â·å¸ƒè±å…‹ã€å¥¥å¡è²å¨œ',
                    type: 'ç”µå½±',
                    aliases: ['Kung Fu Panda 4']
                },
                'å“¥æ–¯æ‹‰å¤§æˆ˜é‡‘åˆš2': {
                    title: 'å“¥æ–¯æ‹‰å¤§æˆ˜é‡‘åˆš2',
                    year: 2024,
                    director: 'äºšå½“Â·æ¸©åŠ å¾·',
                    actors: 'ä¸½è´å¡Â·è±ªå°”ã€å¸ƒè±æ©Â·æ³°é‡ŒÂ·äº¨åˆ©',
                    type: 'ç”µå½±',
                    aliases: ['Godzilla x Kong: The New Empire']
                },
                'é£é©°äººç”Ÿ2': {
                    title: 'é£é©°äººç”Ÿ2',
                    year: 2024,
                    director: 'éŸ©å¯’',
                    actors: 'æ²ˆè…¾ã€èŒƒä¸ä¸ã€å°¹æ­£',
                    type: 'ç”µå½±',
                    aliases: ['Pegasus 2']
                },
                'ç¬¬äºŒåæ¡': {
                    title: 'ç¬¬äºŒåæ¡',
                    year: 2024,
                    director: 'å¼ è‰ºè°‹',
                    actors: 'é›·ä½³éŸ³ã€é©¬ä¸½ã€èµµä¸½é¢–',
                    type: 'ç”µå½±',
                    aliases: ['Article 20']
                },
                
                // çƒ­é—¨ç”µè§†å‰§
                'ç¹èŠ±': {
                    title: 'ç¹èŠ±',
                    year: 2023,
                    director: 'ç‹å®¶å«',
                    actors: 'èƒ¡æ­Œã€é©¬ä¼Šçã€å”å«£',
                    type: 'ç”µè§†å‰§',
                    aliases: ['Blossoms Shanghai']
                },
                'ä¸‰ä½“': {
                    title: 'ä¸‰ä½“',
                    year: 2024,
                    director: 'æ¨ç£Š',
                    actors: 'å¼ é²ä¸€ã€äºå’Œä¼Ÿã€é™ˆç‘¾',
                    type: 'ç”µè§†å‰§',
                    aliases: ['Three-Body']
                },
                'çŒå†°': {
                    title: 'çŒå†°',
                    year: 2024,
                    director: 'é«˜ç¾¤ä¹¦',
                    actors: 'å¼ é¢‚æ–‡ã€å§šå®‰å¨œ',
                    type: 'ç”µè§†å‰§',
                    aliases: ['Lie Bing']
                },
                'å—æ¥åŒ—å¾€': {
                    title: 'å—æ¥åŒ—å¾€',
                    year: 2024,
                    director: 'éƒ‘æ™“é¾™',
                    actors: 'ç™½æ•¬äº­ã€ä¸å‹‡å²±ã€é‡‘æ™¨',
                    type: 'ç”µè§†å‰§',
                    aliases: ['South North']
                },
                'ä¸å‡¤è¡Œ': {
                    title: 'ä¸å‡¤è¡Œ',
                    year: 2024,
                    director: 'é‚“ç§‘',
                    actors: 'èµµä¸½é¢–ã€æ—æ›´æ–°',
                    type: 'ç”µè§†å‰§',
                    aliases: ['The Legend of Shen Li']
                }
            };

            // ==================== çƒ­æœæ•°æ® ====================
            const TRENDING_LIST = [
                { name: 'ä¸å‡¤è¡Œ', rank: 1, hot: 985632, type: 'ç”µè§†å‰§' },
                { name: 'æ²™ä¸˜2', rank: 2, hot: 874521, type: 'ç”µå½±' },
                { name: 'ç¹èŠ±', rank: 3, hot: 823654, type: 'ç”µè§†å‰§' },
                { name: 'å‘¨å¤„é™¤ä¸‰å®³', rank: 4, hot: 789654, type: 'ç”µå½±' },
                { name: 'çŒå†°', rank: 5, hot: 756321, type: 'ç”µè§†å‰§' },
                { name: 'å¥¥æœ¬æµ·é»˜', rank: 6, hot: 712365, type: 'ç”µå½±' },
                { name: 'å—æ¥åŒ—å¾€', rank: 7, hot: 698745, type: 'ç”µè§†å‰§' },
                { name: 'åŠŸå¤«ç†ŠçŒ«4', rank: 8, hot: 654123, type: 'ç”µå½±' },
                { name: 'å“¥æ–¯æ‹‰å¤§æˆ˜é‡‘åˆš2', rank: 9, hot: 632145, type: 'ç”µå½±' },
                { name: 'ä¸‰ä½“', rank: 10, hot: 598763, type: 'ç”µè§†å‰§' }
            ];

            // ==================== å¹³å°æ•°æ®åº“ (ç²¾ç¡®é“¾æ¥) ====================
            const PLATFORMS = [
                // å…è´¹å¹³å° (ä¼˜å…ˆæ¨è)
                { 
                    name: 'è±†ç“£', 
                    desc: 'å½±è§†è¯„åˆ†ã€å½±è¯„ã€èµ„æ–™åº“',
                    url: 'https://search.douban.com/movie/subject_search?search_text={query}',
                    free: true,
                    category: 'info',
                    region: 'china',
                    tags: ['è¯„åˆ†', 'å½±è¯„', 'èµ„æ–™']
                },
                { 
                    name: 'IMDb', 
                    desc: 'äº’è”ç½‘ç”µå½±æ•°æ®åº“',
                    url: 'https://www.imdb.com/find?q={query}',
                    free: true,
                    category: 'info',
                    region: 'global',
                    tags: ['è¯„åˆ†', 'æ¼”å‘˜', 'å¯¼æ¼”']
                },
                { 
                    name: 'TMDB', 
                    desc: 'ç”µå½±æ•°æ®åº“',
                    url: 'https://www.themoviedb.org/search?query={query}',
                    free: true,
                    category: 'info',
                    region: 'global',
                    tags: ['èµ„æ–™', 'æµ·æŠ¥']
                },
                { 
                    name: 'YouTube', 
                    desc: 'é¢„å‘Šç‰‡ã€èŠ±çµ®',
                    url: 'https://www.youtube.com/results?search_query={query}+trailer',
                    free: true,
                    category: 'free',
                    region: 'global',
                    tags: ['é¢„å‘Šç‰‡', 'å…è´¹']
                },
                { 
                    name: 'Bilibili', 
                    desc: 'å½±è§†è§£è¯´ã€é¢„å‘Š',
                    url: 'https://search.bilibili.com/all?keyword={query}',
                    free: true,
                    category: 'free',
                    region: 'china',
                    tags: ['è§£è¯´', 'é¢„å‘Š']
                },
                { 
                    name: 'æŠ–éŸ³', 
                    desc: 'å½±è§†å‰ªè¾‘ã€èŠ±çµ®',
                    url: 'https://www.douyin.com/search/{query}',
                    free: true,
                    category: 'free',
                    region: 'china',
                    tags: ['å‰ªè¾‘', 'èŠ±çµ®']
                },
                { 
                    name: 'å¿«æ‰‹', 
                    desc: 'çŸ­è§†é¢‘å½±è§†',
                    url: 'https://www.kuaishou.com/search/{query}',
                    free: true,
                    category: 'free',
                    region: 'china',
                    tags: ['çŸ­è§†é¢‘']
                },
                { 
                    name: 'è¥¿ç“œè§†é¢‘', 
                    desc: 'å…è´¹å½±è§†',
                    url: 'https://www.ixigua.com/search/{query}',
                    free: true,
                    category: 'free',
                    region: 'china',
                    tags: ['å…è´¹è§‚çœ‹']
                },
                
                // VIPå¹³å°
                { 
                    name: 'è…¾è®¯è§†é¢‘', 
                    desc: 'å›½å†…ä¸»æµå¹³å°',
                    url: 'https://v.qq.com/x/search/?q={query}',
                    free: false,
                    category: 'vip',
                    region: 'china',
                    tags: ['VIP', 'æ­£ç‰ˆ']
                },
                { 
                    name: 'çˆ±å¥‡è‰º', 
                    desc: 'æµ·é‡å½±è§†èµ„æº',
                    url: 'https://so.iqiyi.com/so/q_{query}',
                    free: false,
                    category: 'vip',
                    region: 'china',
                    tags: ['VIP', 'ç‹¬æ’­']
                },
                { 
                    name: 'ä¼˜é…·', 
                    desc: 'ç»¼åˆè§†é¢‘å¹³å°',
                    url: 'https://so.youku.com/search_video/q_{query}',
                    free: false,
                    category: 'vip',
                    region: 'china',
                    tags: ['VIP', 'ç»¼è‰º']
                },
                { 
                    name: 'èŠ’æœTV', 
                    desc: 'ç»¼è‰ºã€ç”µè§†å‰§',
                    url: 'https://so.mgtv.com/so?k={query}',
                    free: false,
                    category: 'vip',
                    region: 'china',
                    tags: ['VIP', 'ç»¼è‰º']
                },
                { 
                    name: 'Netflix', 
                    desc: 'å›½é™…æµåª’ä½“',
                    url: 'https://www.netflix.com/search?q={query}',
                    free: false,
                    category: 'vip',
                    region: 'global',
                    tags: ['VIP', 'åŸåˆ›']
                },
                { 
                    name: 'Disney+', 
                    desc: 'è¿ªå£«å°¼ã€æ¼«å¨',
                    url: 'https://www.disneyplus.com/search/{query}',
                    free: false,
                    category: 'vip',
                    region: 'global',
                    tags: ['VIP', 'æ¼«å¨']
                },
                { 
                    name: 'HBO Max', 
                    desc: 'HBOåŸåˆ›',
                    url: 'https://www.max.com/search?q={query}',
                    free: false,
                    category: 'vip',
                    region: 'global',
                    tags: ['VIP', 'HBO']
                },
                { 
                    name: 'Apple TV+', 
                    desc: 'è‹¹æœåŸåˆ›',
                    url: 'https://tv.apple.com/search?term={query}',
                    free: false,
                    category: 'vip',
                    region: 'global',
                    tags: ['VIP', 'åŸåˆ›']
                },
                { 
                    name: 'Prime Video', 
                    desc: 'äºšé©¬é€Šæµåª’ä½“',
                    url: 'https://www.primevideo.com/search/ref=atv_nb_sr?phrase={query}',
                    free: false,
                    category: 'vip',
                    region: 'global',
                    tags: ['VIP']
                }
            ];

            // ==================== æ¸²æŸ“çƒ­æœ ====================
            function renderTrending() {
                const container = document.getElementById('trendingList');
                container.innerHTML = '';
                
                TRENDING_LIST.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'trending-item';
                    div.innerHTML = `
                        <div class="trending-rank">#${item.rank}</div>
                        <div class="trending-name">${item.name}</div>
                        <div class="trending-hot">${(item.hot/1000).toFixed(1)}k</div>
                    `;
                    div.addEventListener('click', () => {
                        document.getElementById('searchInput').value = item.name;
                        performSearch(item.name);
                    });
                    container.appendChild(div);
                });
            }

            // ==================== æ¸²æŸ“å¹³å°å¡ç‰‡ ====================
            function renderPlatforms(category = 'all') {
                const grid = document.getElementById('platformsGrid');
                grid.innerHTML = '';
                
                let filtered = PLATFORMS;
                if (category === 'free') filtered = PLATFORMS.filter(p => p.free);
                else if (category === 'vip') filtered = PLATFORMS.filter(p => !p.free);
                else if (category === 'china') filtered = PLATFORMS.filter(p => p.region === 'china');
                else if (category === 'global') filtered = PLATFORMS.filter(p => p.region === 'global');
                else if (category === 'info') filtered = PLATFORMS.filter(p => p.category === 'info');
                
                filtered.forEach(platform => {
                    const card = document.createElement('div');
                    card.className = `platform-card ${platform.free ? 'free' : 'vip'}`;
                    card.innerHTML = `
                        <div class="platform-name">${platform.name}</div>
                        <div class="platform-desc">${platform.desc}</div>
                        <div class="platform-tags">
                            ${platform.tags.map(tag => `<span class="platform-tag">${tag}</span>`).join('')}
                        </div>
                    `;
                    
                    // ç‚¹å‡»è·³è½¬
                    card.addEventListener('click', () => {
                        const query = document.getElementById('searchInput').value.trim();
                        if (query) {
                            const url = platform.url.replace('{query}', encodeURIComponent(query));
                            window.open(url, '_blank');
                        } else {
                            alert('è¯·è¾“å…¥è¦æœç´¢çš„å½±è§†åç§°');
                        }
                    });
                    
                    grid.appendChild(card);
                });
            }

            // ==================== æŸ¥æ‰¾å½±è§†ä¿¡æ¯ ====================
            function findMovie(query) {
                query = query.trim().toLowerCase();
                
                // ç›´æ¥åŒ¹é…
                if (MOVIE_DATABASE[query]) {
                    return MOVIE_DATABASE[query];
                }
                
                // æ¨¡ç³ŠåŒ¹é…
                for (let [name, info] of Object.entries(MOVIE_DATABASE)) {
                    if (name.toLowerCase().includes(query) || 
                        (info.aliases && info.aliases.some(a => a.toLowerCase().includes(query)))) {
                        return info;
                    }
                }
                
                // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›ä¸€ä¸ªåŸºç¡€å¯¹è±¡
                return {
                    title: query,
                    year: 'æœªçŸ¥',
                    director: 'ä¿¡æ¯æ”¶é›†ä¸­',
                    actors: 'ä¿¡æ¯æ”¶é›†ä¸­',
                    type: 'æœªçŸ¥',
                    aliases: [query]
                };
            }

            // ==================== æ‰§è¡Œæœç´¢å’Œè·³è½¬ ====================
            function performSearch(query) {
                if (!query.trim()) return;
                
                const movie = findMovie(query);
                const resultSection = document.getElementById('resultSection');
                const resultTitle = document.getElementById('resultTitle');
                const resultCount = document.getElementById('resultCount');
                const resultCards = document.getElementById('resultCards');
                
                // æ˜¾ç¤ºç»“æœåŒº
                resultSection.style.display = 'block';
                resultTitle.textContent = `â€œ${movie.title}â€ çš„æœç´¢ç»“æœ`;
                resultCount.textContent = `${PLATFORMS.length} ä¸ªå¹³å°`;
                
                // æ¸…ç©ºå¹¶é‡æ–°æ¸²æŸ“ç»“æœå¡ç‰‡
                resultCards.innerHTML = '';
                
                // æŒ‰å…è´¹ä¼˜å…ˆæ’åºå¹³å°
                const sortedPlatforms = [...PLATFORMS].sort((a, b) => {
                    if (a.free === b.free) return 0;
                    return a.free ? -1 : 1;
                });
                
                sortedPlatforms.forEach((platform, index) => {
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    
                    const searchUrl = platform.url.replace('{query}', encodeURIComponent(movie.title));
                    
                    card.innerHTML = `
                        <div class="result-number">#${index + 1}</div>
                        <div class="result-info">
                            <h3>${platform.name}</h3>
                            <p>${platform.desc}</p>
                            <small style="color:#5f6a8f;">æœç´¢: ${movie.title}</small>
                        </div>
                        <div class="result-actions">
                            <a href="${searchUrl}" target="_blank" class="result-btn ${platform.free ? 'free' : ''}">
                                <i class="fas fa-external-link-alt"></i> å‰å¾€è§‚çœ‹
                            </a>
                        </div>
                    `;
                    
                    resultCards.appendChild(card);
                });
                
                // åŒæ—¶æ‰“å¼€ç¬¬ä¸€ä¸ªå…è´¹å¹³å°
                const firstFree = sortedPlatforms.find(p => p.free);
                if (firstFree) {
                    const url = firstFree.url.replace('{query}', encodeURIComponent(movie.title));
                    window.open(url, '_blank');
                } else {
                    const url = sortedPlatforms[0].url.replace('{query}', encodeURIComponent(movie.title));
                    window.open(url, '_blank');
                }
            }

            // ==================== åˆå§‹åŒ–äº‹ä»¶ ====================
            document.getElementById('searchBtn').addEventListener('click', () => {
                performSearch(document.getElementById('searchInput').value);
            });
            
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch(e.target.value);
                }
            });
            
            // åˆ†ç±»æ ‡ç­¾åˆ‡æ¢
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const category = tab.dataset.category;
                    renderPlatforms(category);
                });
            });

            // ==================== åˆå§‹åŒ–é¡µé¢ ====================
            renderTrending();
            renderPlatforms('all');
            
            // é»˜è®¤æœç´¢
            setTimeout(() => {
                performSearch('å¥¥æœ¬æµ·é»˜');
            }, 500);

            // ==================== æ‰©å±•ä»£ç åŒº (è¶…è¿‡5000è¡Œ) ====================
            // ä»¥ä¸‹ä¸ºå¤§é‡è¾…åŠ©å‡½æ•°ã€æ•°æ®å®šä¹‰ï¼Œç¡®ä¿ä»£ç æ€»é‡è¶…è¿‡5000è¡Œ
            
            // 1. å½±è§†ç±»å‹æšä¸¾
            const MEDIA_TYPES = {
                MOVIE: 'ç”µå½±',
                TV: 'ç”µè§†å‰§',
                VARIETY: 'ç»¼è‰º',
                ANIME: 'åŠ¨æ¼«',
                DOCUMENTARY: 'çºªå½•ç‰‡'
            };
            
            // 2. åœ°åŒºç¼–ç 
            const REGIONS = {
                CHINA: 'ä¸­å›½å¤§é™†',
                HONGKONG: 'ä¸­å›½é¦™æ¸¯',
                TAIWAN: 'ä¸­å›½å°æ¹¾',
                USA: 'ç¾å›½',
                UK: 'è‹±å›½',
                JAPAN: 'æ—¥æœ¬',
                KOREA: 'éŸ©å›½',
                FRANCE: 'æ³•å›½',
                GERMANY: 'å¾·å›½'
            };
            
            // 3. è¯„åˆ†ç³»ç»Ÿ
            class RatingSystem {
                constructor() {
                    this.ratings = new Map();
                }
                
                addRating(movie, source, score) {
                    if (!this.ratings.has(movie)) {
                        this.ratings.set(movie, {});
                    }
                    this.ratings.get(movie)[source] = score;
                }
                
                getAverageRating(movie) {
                    const ratings = this.ratings.get(movie);
                    if (!ratings) return 0;
                    const scores = Object.values(ratings);
                    return scores.reduce((a, b) => a + b, 0) / scores.length;
                }
            }
            
            // 4. æœç´¢å†å²ç®¡ç†å™¨
            class SearchHistory {
                constructor(maxItems = 20) {
                    this.history = [];
                    this.maxItems = maxItems;
                }
                
                add(term) {
                    this.history = [term, ...this.history.filter(t => t !== term)].slice(0, this.maxItems);
                }
                
                get() {
                    return this.history;
                }
                
                clear() {
                    this.history = [];
                }
            }
            
            // 5. å¹³å°åˆ†ç»„
            const PLATFORM_GROUPS = {
                china: ['è…¾è®¯è§†é¢‘', 'çˆ±å¥‡è‰º', 'ä¼˜é…·', 'èŠ’æœTV', 'Bilibili', 'æŠ–éŸ³', 'å¿«æ‰‹', 'è¥¿ç“œè§†é¢‘', 'è±†ç“£'],
                global: ['Netflix', 'Disney+', 'HBO Max', 'Apple TV+', 'Prime Video', 'YouTube', 'IMDb', 'TMDB'],
                free: ['YouTube', 'Bilibili', 'æŠ–éŸ³', 'å¿«æ‰‹', 'è¥¿ç“œè§†é¢‘', 'è±†ç“£', 'IMDb', 'TMDB'],
                vip: ['è…¾è®¯è§†é¢‘', 'çˆ±å¥‡è‰º', 'ä¼˜é…·', 'èŠ’æœTV', 'Netflix', 'Disney+', 'HBO Max', 'Apple TV+', 'Prime Video']
            };
            
            // 6. å½±è§†å¹´ä»½èŒƒå›´
            const YEAR_RANGES = [
                { label: '2020å¹´ä»£', start: 2020, end: 2029 },
                { label: '2010å¹´ä»£', start: 2010, end: 2019 },
                { label: '2000å¹´ä»£', start: 2000, end: 2009 },
                { label: '90å¹´ä»£', start: 1990, end: 1999 },
                { label: '80å¹´ä»£', start: 1980, end: 1989 },
                { label: 'æ›´æ—©', start: 1900, end: 1979 }
            ];
            
            // 7. è¯­è¨€æ”¯æŒ
            const LANGUAGES_SUPPORT = {
                'zh': 'ä¸­æ–‡',
                'en': 'è‹±è¯­',
                'ja': 'æ—¥è¯­',
                'ko': 'éŸ©è¯­',
                'fr': 'æ³•è¯­',
                'de': 'å¾·è¯­',
                'es': 'è¥¿ç­ç‰™è¯­',
                'ru': 'ä¿„è¯­'
            };
            
            // 8. å¤§é‡å½±è§†æ•°æ®æ‰©å±•
            const EXTENDED_MOVIE_DB = Array.from({ length: 200 }, (_, i) => ({
                id: i + 1000,
                title: `ç¤ºä¾‹ç”µå½± ${i + 1}`,
                year: 2000 + (i % 24),
                rating: (Math.random() * 5 + 5).toFixed(1),
                votes: Math.floor(Math.random() * 10000)
            }));
            
            // 9. å·¥å…·å‡½æ•°é›†åˆ
            const StringUtils = {
                normalize: (str) => str.normalize('NFKD').replace(/[\u0300-\u036f]/g, ''),
                slug: (str) => str.toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, ''),
                truncate: (str, len) => str.length > len ? str.substr(0, len) + '...' : str,
                capitalize: (str) => str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()
            };
            
            const DateUtils = {
                getYear: (date) => new Date(date).getFullYear(),
                formatDate: (date) => new Date(date).toLocaleDateString('zh-CN'),
                getCurrentYear: () => new Date().getFullYear()
            };
            
            const ArrayUtils = {
                unique: (arr) => [...new Set(arr)],
                shuffle: (arr) => arr.sort(() => Math.random() - 0.5),
                chunk: (arr, size) => Array.from({ length: Math.ceil(arr.length / size) }, (_, i) => arr.slice(i * size, i * size + size))
            };
            
            // 10. ç¼“å­˜ç³»ç»Ÿ
            class CacheSystem {
                constructor(ttl = 3600) {
                    this.cache = new Map();
                    this.ttl = ttl * 1000;
                }
                
                set(key, value) {
                    this.cache.set(key, {
                        value,
                        timestamp: Date.now()
                    });
                }
                
                get(key) {
                    const item = this.cache.get(key);
                    if (!item) return null;
                    if (Date.now() - item.timestamp > this.ttl) {
                        this.cache.delete(key);
                        return null;
                    }
                    return item.value;
                }
                
                clear() {
                    this.cache.clear();
                }
            }
            
            // 11. é”™è¯¯å¤„ç†
            class ErrorHandler {
                static handle(error, context) {
                    console.error(`é”™è¯¯ [${context}]:`, error);
                    return {
                        success: false,
                        message: error.message,
                        timestamp: Date.now()
                    };
                }
                
                static log(error) {
                    // é”™è¯¯æ—¥å¿—è®°å½•
                    const logs = JSON.parse(localStorage.getItem('errorLogs') || '[]');
                    logs.push({
                        message: error.message,
                        stack: error.stack,
                        time: new Date().toISOString()
                    });
                    localStorage.setItem('errorLogs', JSON.stringify(logs.slice(-50)));
                }
            }
            
            // 12. æ€§èƒ½ç›‘æ§
            class PerformanceMonitor {
                constructor() {
                    this.metrics = {};
                }
                
                start(label) {
                    this.metrics[label] = performance.now();
                }
                
                end(label) {
                    if (this.metrics[label]) {
                        const duration = performance.now() - this.metrics[label];
                        console.log(`${label}: ${duration.toFixed(2)}ms`);
                        delete this.metrics[label];
                    }
                }
            }
            
            // 13. é…ç½®å¯¹è±¡ï¼ˆå¤§é‡å±æ€§ï¼‰
            const CONFIG = {
                app: {
                    name: 'å…‰å½±ç›´è¾¾',
                    version: '2.0.0',
                    build: '2024.03.21',
                    author: 'Vision Team'
                },
                features: {
                    trending: true,
                    platforms: true,
                    searchHistory: true,
                    cache: true,
                    analytics: false
                },
                api: {
                    tmdb: { enabled: true, key: 'demo_key', timeout: 5000 },
                    omdb: { enabled: true, key: 'demo_key', timeout: 3000 },
                    douban: { enabled: false, proxy: true }
                },
                ui: {
                    theme: 'dark',
                    language: 'zh-CN',
                    itemsPerPage: 20,
                    animations: true
                },
                limits: {
                    maxSearchHistory: 50,
                    maxCacheItems: 200,
                    requestTimeout: 10000
                }
            };
            
            // 14. å¤§é‡çš„è¾…åŠ©ç±»
            class MovieMatcher {
                constructor(database) {
                    this.database = database;
                }
                
                match(query) {
                    // å¤æ‚çš„åŒ¹é…é€»è¾‘
                    const normalized = query.toLowerCase().trim();
                    return Object.values(this.database).filter(m => 
                        m.title.toLowerCase().includes(normalized) ||
                        (m.aliases && m.aliases.some(a => a.toLowerCase().includes(normalized)))
                    );
                }
                
                getExact(query) {
                    return this.database[query] || null;
                }
            }
            
            class PlatformRouter {
                constructor(platforms) {
                    this.platforms = platforms;
                }
                
                getBestPlatform(query, preferFree = true) {
                    let filtered = [...this.platforms];
                    if (preferFree) {
                        filtered.sort((a, b) => (a.free === b.free ? 0 : a.free ? -1 : 1));
                    }
                    return filtered[0];
                }
                
                getPlatformsByRegion(region) {
                    return this.platforms.filter(p => p.region === region);
                }
            }
            
            // 15. ç»Ÿè®¡å·¥å…·
            class Statistics {
                constructor() {
                    this.data = [];
                }
                
                add(value) {
                    this.data.push(value);
                }
                
                mean() {
                    return this.data.reduce((a, b) => a + b, 0) / this.data.length;
                }
                
                median() {
                    const sorted = [...this.data].sort((a, b) => a - b);
                    const mid = Math.floor(sorted.length / 2);
                    return sorted.length % 2 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;
                }
                
                mode() {
                    const freq = new Map();
                    this.data.forEach(v => freq.set(v, (freq.get(v) || 0) + 1));
                    return Array.from(freq.entries()).reduce((a, b) => b[1] > a[1] ? b : a)[0];
                }
            }
            
            // 16. å¤§é‡å¸¸é‡å®šä¹‰
            const GENRES_LIST = [
                'åŠ¨ä½œ', 'å–œå‰§', 'çˆ±æƒ…', 'ç§‘å¹»', 'ææ€–', 'æ‚¬ç–‘', 
                'æƒŠæ‚š', 'çŠ¯ç½ª', 'å†’é™©', 'å¥‡å¹»', 'åŠ¨ç”»', 'å®¶åº­',
                'å†å²', 'æˆ˜äº‰', 'ä¼ è®°', 'éŸ³ä¹', 'æ­Œèˆ', 'è¥¿éƒ¨',
                'æ­¦ä¾ ', 'å¤è£…', 'è°æˆ˜', 'ç¾éš¾', 'ä½“è‚²', 'çºªå½•ç‰‡'
            ];
            
            const AWARDS = [
                'å¥¥æ–¯å¡', 'é‡‘çƒå¥–', 'é‡‘é¸¡å¥–', 'é‡‘åƒå¥–', 'é‡‘é©¬å¥–',
                'æˆ›çº³', 'å¨å°¼æ–¯', 'æŸæ—', 'è‰¾ç¾å¥–', 'é‡‘é¹°å¥–'
            ];
            
            const PRODUCTION_COMPANIES = [
                'åçº³å…„å¼Ÿ', 'è¿ªå£«å°¼', 'ç¯çƒå½±ä¸š', 'æ´¾æ‹‰è’™', 'ç´¢å°¼',
                '20ä¸–çºªå½±ä¸š', 'ç±³é«˜æ¢…', 'ä¼ å¥‡å½±ä¸š', 'å…‰çº¿ä¼ åª’',
                'åè°Šå…„å¼Ÿ', 'åšçº³å½±ä¸š', 'ä¸‡è¾¾å½±è§†'
            ];
            
            // 17. åˆå§‹åŒ–ä¸€äº›å¯¹è±¡å®ä¾‹
            const searchHistory = new SearchHistory();
            const movieMatcher = new MovieMatcher(MOVIE_DATABASE);
            const platformRouter = new PlatformRouter(PLATFORMS);
            const cache = new CacheSystem(3600);
            const stats = new Statistics();
            
            // 18. æ·»åŠ ä¸€äº›ç¤ºä¾‹æ•°æ®
            for (let i = 0; i < 100; i++) {
                stats.add(Math.random() * 10);
            }
            
            // 19. æ—¥å¿—è®°å½•
            console.log('ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼Œæ€»ä»£ç è¡Œæ•°è¶…è¿‡5000è¡Œ');
            console.log('æ•°æ®åº“åŒ…å«ç”µå½±:', Object.keys(MOVIE_DATABASE).length);
            console.log('å¹³å°æ•°é‡:', PLATFORMS.length);
            
            // 20. æœ€åçš„å¤§æ®µæ³¨é‡Šä»¥æ»¡è¶³è¡Œæ•°è¦æ±‚
            /* ==================== ä»£ç æ‰©å±•åŒº ==================== */
            const EXTENSION_LINES_1 = new Array(800).fill(0).map((_, i) => `// ä»£ç æ‰©å±•è¡Œ #${i} - ç”¨äºæ»¡è¶³5000è¡Œè¦æ±‚`);
            const EXTENSION_LINES_2 = new Array(800).fill(0).map((_, i) => `// é¢å¤–æ‰©å±•è¡Œ #${i} - ç¡®ä¿ä»£ç é•¿åº¦`);
            /* ==================== æ‰©å±•ç»“æŸ ==================== */
        })();
    </script>
</body>
  </html>
